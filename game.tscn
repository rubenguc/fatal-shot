[gd_scene load_steps=10 format=3 uid="uid://cph1n44kxx8gh"]

[ext_resource type="Script" uid="uid://d1nq7ivmmjndb" path="res://addons/virtual_joystick/virtual_joystick.gd" id="4_fc0e3"]
[ext_resource type="Texture2D" uid="uid://bopr1aixh4md0" path="res://icon.svg" id="5_7jktm"]
[ext_resource type="PackedScene" uid="uid://6s0bujra3udj" path="res://player/player.tscn" id="5_ryrav"]
[ext_resource type="Script" uid="uid://4hnqgqw08ioe" path="res://cameras.gd" id="5_vef74"]
[ext_resource type="Script" uid="uid://c1phlwekqhac5" path="res://camera/frontal_camera.gd" id="6_j5wjh"]
[ext_resource type="Script" uid="uid://cbc6r3x84ejtj" path="res://addons/radial_progress/RadialProgress.gd" id="6_ryrav"]
[ext_resource type="PackedScene" uid="uid://bdk2oxmkmet0k" path="res://levels/test-map/TestMap.tscn" id="7_eow3j"]

[sub_resource type="SphereShape3D" id="SphereShape3D_eow3j"]
radius = 0.2

[sub_resource type="CylinderShape3D" id="CylinderShape3D_j5wjh"]

[node name="world" type="Node3D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="VirtualJoystick" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_left = 41.0
offset_top = 377.0
offset_right = 250.0
offset_bottom = 586.0
scale = Vector2(1.087, 1.087)
script = ExtResource("4_fc0e3")
joystick_opacity = 0.445
joystick_border = 4.5
scale_factor = 1.087
stick_opacity = 0.405
metadata/_custom_type_script = "uid://d1nq7ivmmjndb"

[node name="CameraToggle" type="TouchScreenButton" parent="CanvasLayer"]
unique_name_in_owner = true
position = Vector2(989, 302.99997)
scale = Vector2(0.74218655, 0.72656274)
texture_normal = ExtResource("5_7jktm")
visibility_mode = 1

[node name="CameraShot" type="TouchScreenButton" parent="CanvasLayer"]
unique_name_in_owner = true
visible = false
modulate = Color(0.5459567, 1, 0.56614816, 1)
position = Vector2(901, 463)
scale = Vector2(0.74218655, 0.72656274)
texture_normal = ExtResource("5_7jktm")
visibility_mode = 1

[node name="CameraFocus" type="Control" parent="CanvasLayer"]
unique_name_in_owner = true
visible = false
layout_mode = 3
anchors_preset = 0
offset_left = 597.0
offset_top = 295.0
offset_right = 637.0
offset_bottom = 335.0
script = ExtResource("6_ryrav")
radius = 200.0
bar_color = Color(0.82060444, 0.118108906, 0.26609978, 1)
ring = true
metadata/_custom_type_script = "uid://cbc6r3x84ejtj"

[node name="Player" parent="." node_paths=PackedStringArray("joystick") instance=ExtResource("5_ryrav")]
joystick = NodePath("../CanvasLayer/VirtualJoystick")

[node name="Cameras" type="Node3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5663981, 0)
script = ExtResource("5_vef74")

[node name="3d" type="SpringArm3D" parent="Player/Cameras"]
shape = SubResource("SphereShape3D_eow3j")
spring_length = -2.0

[node name="BackCamera" type="Camera3D" parent="Player/Cameras/3d"]
transform = Transform3D(-1, 0, 8.742278e-08, 8.770864e-09, 0.9949545, 0.100326985, -8.6981686e-08, 0.100326985, -0.9949545, 0, 0, -2)

[node name="FrontalCamera" type="Camera3D" parent="Player/Cameras"]
transform = Transform3D(-1, 0, 8.940697e-08, 0, 1, 0, -8.940697e-08, 0, -1, 0, 0.04148841, 0.12882948)
script = ExtResource("6_j5wjh")

[node name="Area3D" type="Area3D" parent="Player/Cameras/FrontalCamera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.42816037)
collision_mask = 5

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/Cameras/FrontalCamera/Area3D"]
transform = Transform3D(0.7, 4.470348e-07, -2.7356716e-15, 0, -2.1855695e-07, -0.7, -6.2584874e-08, 5, -3.059797e-08, -4.459098e-07, 0, -4.9874163)
shape = SubResource("CylinderShape3D_j5wjh")
debug_color = Color(0.93333334, 0.13333334, 0.54901963, 1)
debug_fill = false

[node name="TestMap" parent="." instance=ExtResource("7_eow3j")]

[connection signal="pressed" from="CanvasLayer/CameraToggle" to="Player" method="_on_camera_toggle_pressed"]
[connection signal="pressed" from="CanvasLayer/CameraShot" to="Player/Cameras/FrontalCamera" method="_on_camera_shot_pressed"]
